\chapter{Descripción las herramientas implementadas}\label{chapter:implementation}
En este capítulo se presenta la propuesta de solución para 
la informatización de los procesos de asignación de docencia y 
planificación de las tesis que se llevan a cabo 
en la Facultad de Matemática y Computación de la Universidad de La Habana. 

Se implementó un sistema de gestión siguiendo el modelo cliente-servidor. El desarrollo del servidor se efectuó con el uso Django, en 
particular Django Rest Framework y el cliente se desarrolló utilizando
Quasar para la creación de las interfaces de usarios. Para la administración de la 
base de datos se utilizó el SGBD SQLite. Como resultado se creó una 
aplicación web, cuyo funcionamiento se describe a continuación.

FOTO DE LA VISTA HOME 
ALGO COMO AQUI SE DECIDE QUE PROCESOS SE QUIEREN REALIZAR




\section{Asignación de docencia}
En esta sección se describen los pasos que se deben seguir para realizar 
el proceso de asignación de docencia en un departamento a través del sistema 
de gestión que se propone en este trabajo. 
Para la ejemplificación de este proceso se utilizará un fragmento de la docencia correspondiente al departamento
de Matemática Aplicada en el período de tiempo 
enero - julio del curso 2022. En la tabla \ref{tabla-planificación-cap4}
se muestran las asignaturas que se deben impartir. 
% Supongamos que se quiere realizar la asignación de docencia para el departamento 
% de Matemática Aplicada   

\begin{table}[H]
    \centering
    \begin{tabular}{| c | c | c | c | c |}
        \hline
        \thead{Facultad}   & \thead{Año} & \thead{Asignatura} & \thead{Horas} & \thead{Grupos}  \\ \hline
        MATCOM     & M3  & Optimización Matemática I  &  64   &  1/1   \\ 
        MATCOM     & C3  & Modelos de Optimización I  &  64   &  1/2   \\ 
        GEOGRAFÍA  & G2  & Estadística                &  80   &  1/2   \\ 
        \hline
    \end{tabular}
    \caption{Fragmento de la planificación de docencia.}
    \label{tabla-planificación-cap4}
\end{table}


\begin{table}[H]
    \centering
    \begin{tabular}{ | c | c | c | c |}
      \hline
      \thead{Asignatura} & \thead{Horas} & \thead{Grupos} & \thead{Profesores}\\
      \hline
      Optimización Matemática I &  64  & 1/1 & \makecell{C: Aymeeé Marrero (32) \\ CP: Gemayqzel Bouza(32)} \\
      \hline
      Modelos de Optimización I   &  64   &  1/2 & \makecell{C: Aymeeé Marrero(16) \\ C: Fernando Rodríguez (16) \\ CP: Daniela González(32) \\ CP: Camila Pérez(32)}    \\ 
      \hline
      Estadística                 &  80   &  1/2 &  \makecell{C: Elianys García (48) \\ CP: Ernesto Borrego(32) \\ CP: Elianys García(32)} \\  
      \hline
    \end{tabular}
    \caption{Fragmento de la asignación de docencia.}
    \label{tabla-asignación-cap4}
\end{table}

Para replicar la planificación de docencia que se muestra en la tabla \ref{tabla-planificación-cap4}
se provee la interfaz de usuario que se muestra en la figura siguiente. 

\begin{figure}[H]
    \includegraphics[scale=0.3]{Graphics/Implementation/Docencia/PD-example.png}
    \caption{Vista de la planificación de las asignaturas}
    \label{img-pd-example}
\end{figure}


En la figura \ref{img-pd-example},
se indican con recuadros tres regiones cuyo significado se explica a continuación.

\begin{itemize}
    \item A: botón para agregar una nueva planificación de asignatura.
    \item B: filtros por Año, Actividad de clase, Curso escolar, Período de tiempo.
    \item C: barra de búsqueda por texto para el nombre de las asignaturas. 
\end{itemize}


Para agregar una nueva planificación de asignatura se debe pulsar en el 
botón que se indica en el recuadro A y completar los campos del formulario. 
En la figura \ref{img-pd-form} se muestra como agregar la planificación
correspondiente a las conferencias de la asignatura Modelos de Optimización
para los estudiantes de tercer año de la carrera Ciencia de la Computación. 

\begin{figure}[H]
    \includegraphics[scale=0.3]{Graphics/Implementation/Docencia/PD-form.png}
    \caption{Vista del formulario para crear una planificación de asignaturas}
    \label{img-pd-form}
\end{figure}


La figura \ref{img-pd-result} muestra el resultado de agregar las planificaciones de las asignaturas 
correspondientes a la tabla \ref{tabla-planificación-cap4}. 


\begin{figure}[H]
    \includegraphics[scale=0.3]{Graphics/Implementation/Docencia/PD-result.png}
    \caption{Vista de la planificación de las asignaturas}
    \label{img-pd-result}
\end{figure}

Por cada planificación de asignatura que se agregue en el sistema se crean n asignaciones 
de docencia sin asignar, donde n es la cantidad de grupos que tiene la planificación. En 
la figura \ref{img-ta-unassing} se muestran las asignaciones de docencias creadas automáticamente por el sistema 
a partir de las planificaciones agregadas en la figura \ref{img-pd-result}.

\begin{figure}[H]
    \includegraphics[scale=0.3]{Graphics/Implementation/Docencia/AD-unassing.png}
    \caption{Vista de la asignación de docencia}
    \label{img-ta-unassing}
\end{figure}


El próximo paso es realizar la asignación de los profesores para cubrir 
la planificación de docencia del semestre. Para asignar un profesor se debe 
pulsar sobre el botón de editar de una fila. En la figura \ref{img-ta-form-empty} se muestra el resultado 
de pulsar sobre el botón de editar de la primera fila, correspondiente a las conferencias
de la asignatura de Optimización Matemática I. 


\begin{figure}[H]
    \includegraphics[scale=0.3]{Graphics/Implementation/Docencia/AD-form-empty}
    \caption{Vista del formulario para realizar una asignación de docencia}
    \label{img-ta-form-empty}
\end{figure}


Se deben completar los campos del formulario y pulsar sobre el botón editar. 
Como se muestra en la tabla \ref{tabla-planificación-cap4}, la profesora Aymeeé Marrero es la encargada de 
impartir las 32 horas de conferencia de la asignatura Optimización Matemática I, por 
tanto se debe especificar que la profesora imparte el 100 porciento de la planificación
como se muestra en la figura \ref{img-ta-form-fill}.


\begin{figure}[H]
    \includegraphics[scale=0.3]{Graphics/Implementation/Docencia/AD-form-fill.png}
    \caption{Vista del formulario con los datos ingresados de una asignación de docencia}
    \label{img-ta-form-fill}
\end{figure}


En la figura \ref{img-ta-one-assign} se muestra el resultado 
de realizar la asignación.


\begin{figure}[H]
    \includegraphics[scale=0.3]{Graphics/Implementation/Docencia/AD-one-assign.png}
    \caption{Vista del formulario con los datos ingresados de una asignación de docencia}
    \label{img-ta-one-assign}
\end{figure}

Cada vez que se realicen cambios en la tabla, ya sean por agregar, editar o eliminar 
asignaciones de docencia, la carga docente de los profesores se actualiza como se indica 
en el recuadro A. 

En la figura tal se muestra el resultado de cubrir la docencia de las asignaturas de Optimización
Matemática I, Estadística y las clases prácticas de Modelos de Optimización, de acuerdo a la tabla \ref{tabla-asignación-cap4}.
Las conferencias de la asignatura Modelos de Optimización I, se imparten por los profesores 
Aymeeé Marrero y Fernando Rodríguez, 16 horas cada uno. Por tanto es necesario agregar otra fila 
para poder representar esta distribución en el sistema de gestión. 









Una vez se hayan creado las planificación de las asignaturas, el siguiente paso 
es realizar la asignación de los profesores del departamento.



En la figura 
se muestra la interfaz de usuario del sistema para efectuar la asignación de docencia.



El proceso de asignación de docencia en un departamento se realiza en la 
interfaz que se muestra en la figura \ref{img-ta-done}. El usuario de la 
aplicación puede ver la carga docente de los profesores durante el proceso 
de asignación, realizar filtrados por profesor para ver las asignaturas 
que tiene asignada y descargar un documento CSV que contiene la información 
de la docencia una vez haya terminado la asignación.


\begin{figure}[H]
    \includegraphics[scale=0.3]{Graphics/Implementation/Docencia/AD-asignada.png}
    \caption{Vista de la asignación de docencia}
    \label{img-ta-done}
\end{figure}

En la figura \ref{img-ta-done},
se indican con recuadros cuatro regiones cuyo significado se explica a continuación.

\begin{itemize}
    \item A: muestra la carga docente de los profesores dada la asignación actual.
    \item B: botón para agregar una nueva planificación de docencia.
    \item C: botón para descargar la asignación de docencia actual.
    \item D: realizar filtrado por los profesores para ver las asignturas que tiene asignadas.
    \item E: realizar búsquedas por las asignaturas o actividades de clase.
    \item F: botones para editar o borrar una fila de la tabla.  
\end{itemize}



En la figura \ref{img-ta-ordering} se muestra como quedaría ordenada la tabla a partir de los profesores,
con el objetivo de mostrar primero aquellas 
asignaturas que no se han asignado aún.


\begin{figure}[H]
    \includegraphics[scale=0.3]{Graphics/Implementation/Docencia/AD-sin-asignar.png}
    \caption{Vista de la asignación de docencia, ordenada por profesores para que aparezcan primero las asignaturas que aún no han sido asignadas}
    \label{img-ta-ordering}
\end{figure}


Para ordenar la tabla a partir de los profesores se debe pulsar sobre el elemento que se indica en 
con el recuadro A. Para realizar una asignación se debe pulsar el botón de editar que se indica con
con el recuadro B. La figura \ref{img-ta-edit-form1} muestra la vista después de pulsar el botón de 
editar.  



\begin{figure}[H]
    \includegraphics[scale=0.3]{Graphics/Implementation/Docencia/AD-edit-form.png}
    \caption{Vista del formulario para editar una asignación de docencia}
    \label{img-ta-edit-form1}
\end{figure}


Cuando se edita una asignación de docencia es necesario definir la planificación de 
la asignatura (Inferencia Estadística---Conferencia---M3), grupo, profesor que se 
desea asignar y el porciento total de horas que impartirá el profesor. En la figura
\ref{img-ta-edit-form2} se muestra como asignar a la profesora Vivian Sistaschs con un 100
porciento de las horas que se deben impartir en la planificación de la asignatura Inferencia Estadística. 

\begin{figure}[H]
    \includegraphics[scale=0.3]{Graphics/Implementation/Docencia/AD-edit-form2.png}
    \caption{Vista del formulario para editar una asignación de docencia, mostrando los profesores posibles para la asignación}
    \label{img-ta-edit-form2}
\end{figure}



La figura \ref{img-ta-result} muestra el resultado de completar los pasos
que se muestran en la figuras \ref{img-ta-ordering}, \ref{img-ta-edit-form1} y \ref{img-ta-edit-form2}.

\begin{figure}[H]
    \includegraphics[scale=0.3]{Graphics/Implementation/Docencia/AD-result.png}
    \caption{Vista de la asignación tras realizar una asignación correctamente}
    \label{img-ta-result}
\end{figure}

Cada vez que se realicen cambios en la tabla, ya sean por agregar, editar o eliminar 
asignaciones de docencia, la carga docente de los profesores se actualiza como se indica 
en el recuadro A. El recuadro B refleja como quedó la fila tras la asignación de la profesora 
Vivian Sistaschs para que imparta las 48 horas de conferencia de la asignatura Inferencia Matemática
a los estudiantes que cursan el tercer año de la carrera Matemática.


Para poder llevar a cabo el proceso de asignación de docencia a través del sistema de 
gestión que se propone, es necesario que en la base de datos se ingresen las informaciones 
que intervienen en este proceso. Por ejemplo, para realizar una asignación de docencia se necesitan 
los profesores del departamento, 
y las planificaciones de las asignturas. Para poder crear las planificación de las asignaturas 
se necesitan las asignaturas, los años escolares, las actividades de clase y los períodos de tiempo.
Por tanto el primer paso para realizar la asignación de docencia es ingresar todos los datos que 
se describen en la sección \ref{database:asignación-docencia}.


[PONER OTRAS IMG DEL SITIO COMO LA VISTA DE LOS PROFESORES O PLANIFICACIÓN DE ASIGNATURAS 
O ESO VA PA LOS ANEXOS]\\


En la siguiente sección se explica el flujo para la confección de los 
tribunales de tesis y la planificación de las defensas de tesis.

\section{Confección de los tribunales de tesis y planificación de las defensas de tesis}
Para la confección de los tribunales de tesis y la planificación de las defensas de tesis,
se debe partir de las tesis que se vayan a defender en un curso dado. En la 
figura tal se muestra la interfaz de usuario para la creación de las tesis.

[INSERTAR VISTA DE LAS TESIS] \\

[EXPLICAR EL FLUJO DE CREACION DE LAS TESIS]

Cada vez que se agregue una tesis al sistema de gestión, se crean dos instancias, 
una de TRIBUNAL DE TESIS con los campos de oponente y presidente sin asignar y otra 
de DEFENSA DE TESIS con los campos fecha, hora y local sin asignar. A continuación 
se describe el flujo para completar los procesos de confección de los tribunales de tesis
y planificación de las defensas de tesis.

[IMGS PARA EXPLICAR COMO ASIGNAR EL OPONENTE Y PRESIDENTE] \\

[LUEGO IMG PARA EXPLICAR COMO DEFINIR FECHA HORA Y LUGAR]





\section{Exportar e importar datos de la base de datos}

En el servidor se implementó un módulo 
que permite salvar el estado de la base de datos 
en documentos csv y poblar la base de datos a partir de los mismos.
Se crearon dos comandos para ejecutar en la terminal con el 
fin de realizar las tareas mencionadas previamente:

\subsection{Exportar los datos de la base de datos}

Se implemetó el comando \textit{save\_database}
que permite exportar una o todas las tablas de la base de datos.
La información de cada tabla se almacena en un archivo CSV.
Para exportar la información de una única tabla
se debe especificar su nombre precedido del argumento \textit{-m}. Por 
ejemplo para salvar la tabla que contiene la información de los profesores, se debe 
ejecutar el siguiente comando.

\begin{verbatim}
    python manage.py save_database -m Professors
\end{verbatim}


Por otra parte, si lo que se desea es exportar la información de todas las tablas 
de la base de datos a documentos CSV, se debe ejecutar el siguiente comando.

\begin{verbatim}
    python manage.py save_database
\end{verbatim}


\subsection{Importar datos a la base de datos}
Se implementó el comando \textit{fill\_database} que permite poblar la 
base de datos a partir de los archivos CSV generados con el comando \textit{save\_database}.
Con este comando se puede poblar una o todas las tablas de la base de 
datos. 
Para poblar la información de una única tabla
se debe especificar su nombre precedido del argumento \textit{-m}. Por 
ejemplo para llenar la tabla que contiene la información de las asignaturas, se debe 
ejecutar el siguiente comando.

\begin{verbatim}
    python manage.py fill_database -m Subjects
\end{verbatim}

Por otra parte, si lo que se desea es importar la información de todos los archivos CSV  
para la base de datos, se debe ejecutar el siguiente comando.

\begin{verbatim}
    python manage.py fill_database
\end{verbatim}


Los posibles nombres de entidades a utilizar con
el parámetro -m tanto para el comando 
\textit{save\_database} como \textit{fill\_database} son:
ClassTypes, Faculties,
ScientificDegrees, TeachingCategories,
Semesters, TeachingGroups, TimePeriods,
Careers, StudyPlans, CarmenTable, Departments,
Subjects, Professors, SubjectDescriptions, TeachingAssignments,
Places, Keywords, Thesis, ThesisCommittee.




% Se implementó un modelo de optimización para la 
% generación de asignaciones de docencia, pendiente
% computar el peso de las asignaciones (dado las
% preferencias de los profesores y sus habilidades)
